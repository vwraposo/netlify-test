"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const text_mask_core_1 = require("text-mask-core");
const react_1 = require("react");
function useMaskedInput({ guide, input, keepCharPositions, mask, onChange, pipe, placeholderChar, showMask, value = '', }) {
    const textMask = react_1.useRef();
    function init() {
        if (!(input === null || input === void 0 ? void 0 : input.current))
            return;
        textMask.current = text_mask_core_1.createTextMaskInputElement({
            guide,
            inputElement: input.current,
            keepCharPositions,
            mask,
            pipe,
            placeholderChar,
            showMask,
        });
        textMask.current.update(value);
    }
    react_1.useLayoutEffect(init, [
        guide,
        keepCharPositions,
        mask,
        pipe,
        placeholderChar,
        showMask,
    ]);
    react_1.useLayoutEffect(() => {
        var _a;
        if (value === ((_a = input === null || input === void 0 ? void 0 : input.current) === null || _a === void 0 ? void 0 : _a.value))
            return;
        init();
    }, [value]);
    return (event) => {
        if (textMask.current) {
            textMask.current.update();
        }
        if (typeof onChange === 'function') {
            onChange(event);
        }
    };
}
exports.default = useMaskedInput;
