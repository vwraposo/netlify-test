"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.usePixelCallbackEvent = void 0;
const react_1 = require("react");
const pixel_1 = require("./pixel");
exports.usePixelCallbackEvent = (handler) => {
    const callback = react_1.useCallback((message) => {
        try {
            const maybeEvent = pixel_1.unwrap(message);
            if (maybeEvent) {
                handler(maybeEvent);
            }
        }
        catch (err) {
            console.error('Some bad happened while running Pixel handler');
        }
    }, [handler]);
    react_1.useEffect(() => {
        window.addEventListener('message', callback);
        return () => window.removeEventListener('message', callback);
    }, [callback]);
};
