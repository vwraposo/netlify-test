"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.setupIframeListener = exports.CMS_CONTENT = void 0;
const gatsby_transformer_vtex_cms_1 = require("@vtex/gatsby-transformer-vtex-cms");
const isCMSData = (data) => data && data.action === 'cmsUpdate' && gatsby_transformer_vtex_cms_1.isContent(data.currentVariant);
exports.CMS_CONTENT = 'cms-content';
exports.setupIframeListener = () => {
    window.addEventListener('message', (event) => {
        const { data } = event;
        if (isCMSData(data)) {
            const { currentVariant } = data;
            localStorage.setItem(exports.CMS_CONTENT, JSON.stringify(currentVariant));
        }
    }, false);
};
